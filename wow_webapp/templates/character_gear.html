{% extends "base.html" %}
{% block content %}
<div class="row g-3">
  <div class="col-md-4">
    <div class="wow-card p-3">
      <h3 class="wow-section-title mb-2">Equip Gear</h3>
      <p class="mb-1 text-light"><strong>Character:</strong> {{ character.char_name }}</p>
      <p class="mb-1 text-light"><strong>Class:</strong> {{ character.class_name }}</p>
      <p class="mb-3 text-light"><strong>Level:</strong> {{ character.level }}</p>

      <form method="post" action="{{ url_for('character_level', character_id=character.character_id) }}"
            class="d-flex gap-2 align-items-center">
        <input type="number" name="level" min="1" max="60" value="{{ character.level }}"
               class="form-control form-control-sm" style="max-width:120px;">
        <button class="btn btn-success btn-sm" type="submit">Update Level</button>
      </form>

      <hr class="wow-hr my-3">
      <a class="btn btn-outline-light w-100"
         href="{{ url_for('character_detail', character_id=character.character_id) }}">
        Back
      </a>
    </div>
  </div>

  <div class="col-md-8">
    <form method="post" class="wow-card p-3">
      <h4 class="wow-section-title mb-3">Slots</h4>

      {% for slot in slots %}
        {% set field = slot.lower().replace(" ", "_") %}
        <div class="mb-3 row">
          <label class="col-sm-3 col-form-label text-light">{{ slot }}</label>
          <div class="col-sm-9">
            <select class="form-select" name="{{ field }}">
              <option value="">-- Empty --</option>
              {% for item in gear_options[slot] %}
                <option value="{{ item.gear_id }}"
                        {% if equipped.get(slot) == item.gear_id %}selected{% endif %}>
                  {{ item.name }}
                </option>
              {% endfor %}
            </select>
          </div>
        </div>
      {% endfor %}

      <div class="mt-3">
        <button type="submit" class="btn btn-wow">Save Equipment</button>
        <a href="{{ url_for('character_detail', character_id=character.character_id) }}"
           class="btn btn-outline-light ms-2">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
