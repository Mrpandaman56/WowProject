{% extends "base.html" %}
{% block content %}
<div class="wow-card p-4">
  <div class="d-flex justify-content-between align-items-center mb-3">
    <div>
      <h2 class="wow-section-title mb-1">All Characters</h2>
      <p class="mb-0 wow-muted">These are all characters currently stored in the database.</p>
    </div>
    {% if user %}
      <a class="btn btn-wow" href="{{ url_for('create_character') }}">Create Character</a>
    {% endif %}
  </div>

  {% if characters %}
    <div class="table-responsive mt-3">
      <table class="table table-dark table-striped table-hover align-middle mb-0">
        <thead>
          <tr>
            <th>Name</th><th>Level</th><th>Race</th><th>Class</th><th>Faction</th><th>Owner</th>
          </tr>
        </thead>
        <tbody>
          {% for c in characters %}
            <tr>
              <td>
                <a class="wow-link" href="{{ url_for('character_detail', character_id=c.character_id) }}">{{ c.char_name }}</a>
              </td>
              <td><span class="wow-pill">{{ c.level }}</span></td>
              <td>{{ c.race_name }}</td>
              <td>{{ c.class_name }}</td>
              <td>{{ c.faction_name }}</td>
              <td>
                <a class="wow-link" href="{{ url_for('user_public', username=c.username) }}">{{ c.username }}</a>
              </td>
            </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>
  {% else %}
    <div class="mt-3">
      <p class="fs-5 wow-muted mb-0">
        No characters found. Try creating one!
        {% if user %}
          <a href="{{ url_for('create_character') }}" class="btn btn-primary btn-sm ms-2">Create here!</a>
        {% else %}
          <a href="{{ url_for('login') }}" class="btn btn-primary btn-sm ms-2">Login to create</a>
        {% endif %}
      </p>
    </div>
  {% endif %}
</div>
{% endblock %}
